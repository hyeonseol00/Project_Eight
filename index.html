<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Eight</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="style.css">

    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { doc, deleteDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { updateDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyA-po3ADf1wsTiF0ZUmzeNL_JA-kO31yOc",
            authDomain: "sparta-dfc3e.firebaseapp.com",
            projectId: "sparta-dfc3e",
            storageBucket: "sparta-dfc3e.appspot.com",
            messagingSenderId: "831720727424",
            appId: "1:831720727424:web:fcd733763ca67e0b189765",
            measurementId: "G-ZRKFBKD9MC"
        };

        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        //const modal = document.querySelector('#modal1');
        //const btnOpenModal = document.querySelector('.btn-open-modal');

        $(".moreinfobtn").click(async function () {
            let modal;

            switch (this.className.split(' ')[0]) {
                case "moreinfobtn1":
                    modal = document.querySelector('#info_modal1');
                    break;
                case "moreinfobtn3":
                    modal = document.querySelector('#info_modal3');
                    break;
                case "moreinfobtn4":
                    modal = document.querySelector('#info_modal4');
                    break;
            }

            if (modal.style.display === "none")
                modal.style.display = "flex";
            else
                modal.style.display = "none";
        });

        $(".updatebtn").click(async function () {
            let tempDoc = await getDoc(doc(db, "projectEight", this.value));

            await deleteDoc(doc(db, "projectEight", this.value));

            $('#title').attr('value', tempDoc.data()['title']);
            $('#comment').html(tempDoc.data()['comment']);
        });
        
        $(".commbtn").click(async function () {
            let modal = document.querySelector('#comm_modal');

            if (modal.style.display === "none")
                modal.style.display = "flex";
            else
                modal.style.display = "none";
        });

        $("#postingbtn").click(async function () {
            let name = $('#name').val();
            let comment = $('#comment').val();

            let doc = {
                'name': name,
                'comment': comment,
            };

            await addDoc(collection(db, "projectEight"), doc);

            alert('저장 완료!');
            window.location.reload();
        });

        $(".deletebtn").click(async function () {
            await deleteDoc(doc(db, "projectEight", this.value));

            alert("삭제 완료!");
            window.location.reload();
        });
        
        let docs = await getDocs(collection(db, "projectEight"));
        docs.forEach((doc) => {
            let row = doc.data();

            let id = doc.id;
            let name = row['name'];
            let comment = row['comment'];

            let temp_html;

            $('#card').append(temp_html);
        });

    </script>
</head>

<body>
    <div class="one">
        <div class="nine">
            <h1>eight<span>8</span></h1>
        </div>
    </div>
    <div class="main_up_team">
        <div class="main_up_team_prd">
            <h1 style="margin-bottom: 3em;">Eight</h2>
                <p>소개 : Team 8조를 맡은 에이트 입니다. </p>
                <p>목표 : 활발히 소통하며 최대한 와이어프레임 설계한 만큼 페이지 구현하기!</p>
                <p>규칙</p>
                <p>1. 서로 배려하는 마음으로 소통하기</p>
                <p>2. 편하게 서로 질문하기</p>

        </div>
        <div>
            <img class="number" src="num.png">
        </div>
        <div>
            <img src="8.png" class="main_up_team_img rounded mx-auto d-block" alt="...">
        </div>

    </div>

    <div class="main_up_div" style="margin:15px;">
        <div class="card horizontal_card">
            <div class="card_content">
                <div class="card_front">
                    <img src="양재석.jpg" style="width: 100%; height: 100%;">
                </div>
                <div class="card_back">
                    <span>이름 : 양재석</span>
                    <span>Mbti : ENTJ</span>
                    <button type="button" class="moreinfobtn1 moreinfobtn btn btn-light"
                        style="margin-top: 8px;">자세히</button>
                </div>
            </div>
        </div>



        <div class="card horizontal_card">
            <div class="card_content">
                <div class="card_front">
                    <img src="졸라맨.png">
                </div>
                <div class="card_back">
                    <span>이름 : 이성운</span>
                    <span>Mbti : INFJ</span>
                    <button type="button" class="moreinfobtn3 moreinfobtn btn btn-light"
                        style="margin-top: 8px;">자세히</button>
                </div>
            </div>
        </div>
        <div class="card horizontal_card">
            <div class="card_content">
                <div class="card_front">
                    <img src="졸라맨.png">
                </div>
                <div class="card_back">
                    <span>이름 : 김영규</span>
                    <span>Mbti : ESFJ</span>
                    <button type="button" class="moreinfobtn4 moreinfobtn btn btn-light"
                        style="margin-top: 8px;">자세히</button>
                </div>
            </div>
        </div>
    </div>

    <div id="info_modal1" class="modal">
        <div class="modal_body">
            <div class="row">
                <img src="양재석.jpg" style="width: 200px; height: 200px; margin-left: 40px; padding: 0px 0px 0px 0px;">
                <div class="col-md-6" style="margin-top: 80px;">
                    <h3 class="card-title">양재석</h3>
                    <p class="card-text">ENTJ</p>
                </div>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>소개</h3>
                <p>이번에 Eight 팀의 팀장을 맡게 된 양재석입니다!<br>프로젝트 진행하는 동안 잘 부탁드립니다ㅎㅎ</p>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>역할</h3>
                <p>S.A. 및 와이어프레임 작성<br>GitHub 프로젝트 업로드 및 배포<br>페이지 모달창부 개발</p>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>Blog & GitHub</h3>
                <p>https://velog.io/@hyeonseol22<br>https://github.com/hyeonseol00</p>
            </div>
            <button type="button" class="moreinfobtn1 moreinfobtn btn btn-primary btn-lg">닫기</button>
        </div>
    </div>
    <div id="info_modal3" class="modal">
        <div class="modal_body">
            <div class="row">
                <img src=""
                    style="background-color: green; width: 200px; height: 200px; border:1px solid black; margin: 15px 20px;">
                <div class="col-md-6" style="margin-top: 80px;">
                    <h3 class="card-title">이성운</h3>
                    <p class="card-text">INFJ</p>
                </div>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>소개</h3>
                <p>내용</p>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>역할</h3>
                <p>페이지 타이틀 및 팀원 자기소개 카드부 개발</p>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>Blog & GitHub</h3>
                <p>https://development-getting-better.tistory.com/<br>https://github.com/sw-64/</p>
            </div>
            <button type="button" class="moreinfobtn3 moreinfobtn btn btn-primary btn-lg">닫기</button>
        </div>
    </div>
    <div id="info_modal4" class="modal">
        <div class="modal_body">
            <div class="row">
                <img src=""
                    style="background-color: green; width: 200px; height: 200px; border:1px solid black; margin: 15px 20px;">
                <div class="col-md-6" style="margin-top: 80px;">
                    <h3 class="card-title">김영규</h3>
                    <p class="card-text">ESFJ</p>
                </div>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>소개</h3>
                <p>내용</p>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>역할</h3>
                <p>페이지 방명록(댓글)부 개발</p>
            </div>
            <div class="modalbox bg-body-tertiary border rounded-3">
                <h3>Blog & GitHub</h3>
                <p>https://github.com/ykyu99/</p>
            </div>
            <button type="button" class="moreinfobtn4 moreinfobtn btn btn-primary btn-lg">닫기</button>
        </div>
    </div>
    <div id="comm_modal" class="modal">
        <div class="modal_body modal_mini">
            <div class="form-floating mb-3">
                <input type="email" class="form-control" id="title" placeholder="이름">
                <label for="floatingInput">이름</label>
            </div>
            <div class="commentbox form-floating mb-3">
                <textarea type="text" class="form-control" id="comment" placeholder="내용"></textarea>
                <label for="floatingInput">내용</label>
            </div>
            <button type="button" class="commbtn btn btn-primary btn-lg">수정</button>
        </div>
    </div>
    <button type="button" class="commbtn btn btn-primary btn-lg">수정</button>

</html>